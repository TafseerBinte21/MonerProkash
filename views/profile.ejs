<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta
            name="viewport"
            content="width-device-width"
            ,
            initial-scale="1.0"
        />
        <title>Profile</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
            crossorigin="anonymous"
        />
        <link rel="stylesheet" href="/css/style.css" />
    </head>
    <body>
        <%- include('nav'); -%>
        <div class="container my-5">
            <div class="w-100 text-center" id="liveAlertPlaceholder">
                <h1
                    style="
                        font-size: 55px;
                        text-align: center;
                        font-family: 'Times New Roman', Times, serif;
                        color: rgb(0, 153, 255);
                    "
                >
                    Profile
                </h1>

                <div class="square-card mw-100">
                    <div alt="square card">
                        <!-- <div class="card-header">
                            <div class="card-header_overlay">
                                <img
                                    src="<%=user.img%>"
                                    alt="MonerProkash"
                                    width="100%"
                                />
                            </div>
                        </div> -->
                        <div class="card-title">
                            
                            <form
                                action="/a_profile/<%= user.id %>"
                                method="post"
                            >
                                <h4><%= user.name %></h4>
                                <h6>Phone: <%= user.phone %></h6>
                                <h6>Email: <%= user.email %></h6>
                                <h6>Gender: <%= user.gender %></h6>
                                <% if (appointment) {%>
                                <h6>
                                    Appointment: <%= appointment.name %> (<%=
                                    appointment.phone %>)
                                </h6>
                                <input
                                    type="number"
                                    id="counselorId"
                                    name="counselorId"
                                    value="<%= appointment.id %>"
                                    hidden
                                />
                                <button
                                    type="submit"
                                    class="btn btn-primary"
                                    id="liveAlertBtn"
                                >
                                    Delete
                                </button>
                                <% } %>
                            </form>
                            <% if (!appointment) {%>
                            <button class="btn btn-primary">
                                <a
                                    href="/help"
                                    style="color: white; text-decoration: none"
                                    >Book Appointment</a
                                >
                            </button>
                            <% } %>
                            
                        </div>
                        <h1 style="padding-top: 15px ;"></h1>
                        <!-- course -->
                        <div class="card-title">
                            <form
                                action="/c_profile/<%= user.id %>"
                                method="post"
                            >
                             
                                <% if (course_booking)  {%>
                                <h6>
                                    Booked courses: <%= course_booking.name %> (<%=
                                    course_booking.time %>)
                                </h6>
                             
                                <input
                                    type="number"
                                    id="courseId"
                                    name="courseId"
                                    value="<%= course_booking.id %>"
                                    hidden
                                />
                                <button
                                    type="submit"
                                    class="btn btn-primary"
                                    id="liveAlertBtn1"
                                >
                                    Delete
                                </button>
                                <% } %>
                            </form>
                            <% if (!course_booking) {%>
                            <button class="btn btn-primary">
                                <a
                                    href="/course"
                                    style="color: white; text-decoration: none"
                                    >Book Courses</a
                                >
                            </button>
                            <% } %>
                            
                        </div>




                    </div>
                </div>
            </div>
        </div>

        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
            crossorigin="anonymous"
        ></script>
        <script>
            const alertPlaceholder = document.getElementById(
                "liveAlertPlaceholder"
            );

            const alert = (message, type) => {
                const wrapper = document.createElement("div");
                wrapper.innerHTML = [
                    `<div class="alert alert-${type} alert-dismissible" role="alert">`,
                    `   <div>${message}</div>`,
                    '   <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>',
                    "</div>",
                ].join("");

                alertPlaceholder.append(wrapper);
            };

            const alertTrigger = document.getElementById("liveAlertBtn");
            if (alertTrigger) {
                alertTrigger.addEventListener("click", () => {
                    alert(
                        "Request for the appointment done. You'll be contacted shortly via phone and email.",
                        "success"
                    );
                });
            }
        </script>
    </body>
</html>
